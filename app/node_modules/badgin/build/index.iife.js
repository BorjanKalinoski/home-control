var badgin=function(e){"use strict";let t=!1;const n=()=>{t||"ExperimentalBadge"in window||"setExperimentalAppBadge"in navigator||(console.warn("Badging API must be enabled. Please check here how you can enable it: https://developers.google.com/web/updates/2018/12/badging-api#use"),t=!0)},i={mediaQuery:null,value:0};function a(){return"ExperimentalBadge"in window&&!!window.ExperimentalBadge}function o(){return"setExperimentalAppBadge"in navigator&&!!navigator.setExperimentalAppBadge&&"clearExperimentalAppBadge"in navigator&&!!navigator.clearExperimentalAppBadge}function r(){return i.mediaQuery||(i.mediaQuery=window.matchMedia("(display-mode: standalone)"),i.mediaQuery.onchange=(e=>{l(i.value)})),i.mediaQuery.matches&&(a()||o())}function l(e){return i.value=e,r()?a()?(window.ExperimentalBadge.set(e),!0):!!o()&&(navigator.setExperimentalAppBadge(e),!0):(n(),!1)}function c(e,t){for(const n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],c(e[n],t[n]));return Object.assign(e||{},t),e}function d(e){return void 0!==e&&Number.isInteger(e)&&e>=0}const s=0,u={backgroundColor:"#424242",color:"#ffffff",indicator:"!",radius:3,size:7,horizontalMargin:0,verticalMargin:0,horizontalPadding:1,verticalPadding:1},g=()=>{const e=document.head.getElementsByTagName("link"),t=[];for(let n=0;n<e.length;n++){const i=e[n],a=i.getAttribute("href"),o=i.getAttribute("rel");a&&(o&&-1!==o.split(" ").indexOf("icon")&&t.push(i))}return t},m=()=>{const e=g();let t=null,n=0;for(let i=0;i<e.length;i++){const a=e[i],o=a.getAttribute("sizes");if(!o){t||(t=a,n=0);continue}if("any"===o)return a;const r=parseInt(o.split("x")[0],10);Number.isNaN(r)?t||(t=a,n=0):r>n&&(t=a,n=r)}return t},v={favicons:null,bestFavicon:null,bestFaviconImage:null,value:s,options:u},f=window.matchMedia("screen and (min-resolution: 2dppx)"),p=()=>Math.ceil(window.devicePixelRatio)||1,h=()=>{y(v.value,v.options)},b=()=>16*p(),w=(e,t,n)=>{const i=b(),a=document.createElement("canvas");a.width=i,a.height=i;const o=a.getContext("2d");o&&(e.width=i,e.height=i,o.drawImage(e,0,0,e.width,e.height),x(o,t,n),(e=>{if(!e)return;for(const e of g())e.parentNode&&e.parentNode.removeChild(e);const t=document.createElement("link");t.id="badgin",t.type="image/x-icon",t.rel="icon favicon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)})(a.toDataURL()))},x=(e,t,n)=>{const i=p(),a=b();let o="";if(!(o=d(t)?0===t?"":t<100?String(t):"99+":n.indicator))return;const r=n.size-2,l=`${n.size*i}px Arial`;e.font=l;const{width:c}=e.measureText(o);e.restore();const s=c+2*n.horizontalPadding,u=a-(r*i+2*n.verticalPadding)-n.verticalMargin,g=a-s-n.horizontalMargin,m=16*i-n.verticalMargin,v=16*i-n.horizontalMargin,f=n.radius;e.globalAlpha=1,e.fillStyle=n.backgroundColor,e.strokeStyle=n.backgroundColor,e.lineWidth=0,e.beginPath(),e.moveTo(g+f,u),e.quadraticCurveTo(g,u,g,u+f),e.lineTo(g,m-f),e.quadraticCurveTo(g,m,g+f,m),e.lineTo(v-f,m),e.quadraticCurveTo(v,m,v,m-f),e.lineTo(v,u+f),e.quadraticCurveTo(v,u,v-f,u),e.closePath(),e.fill(),e.save(),e.font=l,e.fillStyle=n.color,e.textAlign="center",e.textBaseline="hanging",e.fillText(o,g+s/2,u+n.verticalPadding),e.save()};function E(){return!!m()}function y(e,t){if(v.value=e,c(v.options,t||{}),!E())return!1;if(!v.bestFavicon){const e=m();if(e){const t=document.createElement("img");e.href.match(/^data/)||(t.crossOrigin="anonymous"),t.src=e.href,v.bestFavicon=e,v.bestFaviconImage=t}f.addEventListener("change",h)}return v.favicons||(v.favicons=g()),!!v.bestFaviconImage&&(v.bestFaviconImage.complete?(w(v.bestFaviconImage,v.value,v.options),!0):(v.bestFaviconImage.addEventListener("load",function(){w(this,v.value,v.options)}),!0))}const B={title:null,value:0,options:{indicator:"!"}};function A(e,t){return null===B.title&&(B.title=document.title,Object.defineProperty(document,"title",{get:()=>B.title,set:e=>{B.title=e,function(e,t,n){let i=e;i=d(t)?0===t?e:`(${t}) ${e}`:`(${n.indicator}) ${e}`;const a=document.querySelector("title");a&&(a.childNodes[0].nodeValue=i)}(B.title,B.value,B.options)}})),B.value=e,c(B.options,t||{}),document.title=document.title,!0}return e.clear=function(){r()&&(a()?window.ExperimentalBadge.clear():o()&&navigator.clearExperimentalAppBadge()),function(){if(E()&&(v.value=s,v.options=u,f.removeEventListener("change",h),v.favicons)){for(const e of g())e.parentNode&&e.parentNode.removeChild(e);for(const e of v.favicons)document.head.appendChild(e);v.favicons=null,v.bestFavicon=null,v.bestFaviconImage=null}}(),B.value=0,document.title=document.title},e.set=function(e,t={}){switch(t.method){case void 0:case"Badging":if(l(e)&&"Badging"===t.method)break;case"Favicon":if(y(e,t.favicon))break;default:A(e,t.title)}},e}({});
