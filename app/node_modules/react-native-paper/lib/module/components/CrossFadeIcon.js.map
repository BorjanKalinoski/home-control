{"version":3,"sources":["CrossFadeIcon.tsx"],"names":["React","Animated","StyleSheet","View","Icon","isValidIcon","isEqualIcon","withTheme","CrossFadeIcon","Component","currentIcon","props","source","previousIcon","fade","Value","getDerivedStateFromProps","nextProps","nextState","componentDidUpdate","_","prevState","state","theme","animation","scale","setValue","timing","duration","toValue","useNativeDriver","start","render","color","size","opacityPrev","opacityNext","interpolate","inputRange","outputRange","rotatePrev","rotateNext","styles","content","height","width","icon","opacity","transform","rotate","create","alignItems","justifyContent","position","top","left","right","bottom"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Animated, StyleSheet, View } from 'react-native';\nimport Icon, { isValidIcon, isEqualIcon, IconSource } from './Icon';\n\nimport { withTheme } from '../core/theming';\n\ntype Props = {\n  /**\n   * Icon to display for the `CrossFadeIcon`.\n   */\n  source: IconSource;\n  /**\n   * Color of the icon.\n   */\n  color: string;\n  /**\n   * Size of the icon.\n   */\n  size: number;\n  /**\n   * @optional\n   */\n  theme: ReactNativePaper.Theme;\n};\n\ntype State = {\n  currentIcon: IconSource;\n  previousIcon: IconSource | null;\n  fade: Animated.Value;\n};\n\nclass CrossFadeIcon extends React.Component<Props, State> {\n  static getDerivedStateFromProps(nextProps: Props, nextState: State) {\n    if (nextState.currentIcon === nextProps.source) {\n      return null;\n    }\n\n    return {\n      currentIcon: nextProps.source,\n      previousIcon: nextState.currentIcon,\n    };\n  }\n\n  state: State = {\n    currentIcon: this.props.source,\n    previousIcon: null,\n    fade: new Animated.Value(1),\n  };\n\n  componentDidUpdate(_: Props, prevState: State) {\n    const { previousIcon } = this.state;\n    const {\n      theme: {\n        animation: { scale },\n      },\n    } = this.props;\n\n    if (\n      !isValidIcon(previousIcon) ||\n      isEqualIcon(previousIcon, prevState.previousIcon)\n    ) {\n      return;\n    }\n\n    this.state.fade.setValue(1);\n\n    Animated.timing(this.state.fade, {\n      duration: scale * 200,\n      toValue: 0,\n      useNativeDriver: true,\n    }).start();\n  }\n\n  render() {\n    const { color, size } = this.props;\n    const opacityPrev = this.state.fade;\n    const opacityNext = this.state.previousIcon\n      ? this.state.fade.interpolate({\n          inputRange: [0, 1],\n          outputRange: [1, 0],\n        })\n      : 1;\n\n    const rotatePrev = this.state.fade.interpolate({\n      inputRange: [0, 1],\n      outputRange: ['-90deg', '0deg'],\n    });\n\n    const rotateNext = this.state.previousIcon\n      ? this.state.fade.interpolate({\n          inputRange: [0, 1],\n          outputRange: ['0deg', '-180deg'],\n        })\n      : '0deg';\n\n    return (\n      <View\n        style={[\n          styles.content,\n          {\n            height: size,\n            width: size,\n          },\n        ]}\n      >\n        {this.state.previousIcon ? (\n          <Animated.View\n            style={[\n              styles.icon,\n              {\n                opacity: opacityPrev,\n                transform: [{ rotate: rotatePrev }],\n              },\n            ]}\n          >\n            <Icon source={this.state.previousIcon} size={size} color={color} />\n          </Animated.View>\n        ) : null}\n        <Animated.View\n          style={[\n            styles.icon,\n            {\n              opacity: opacityNext,\n              transform: [{ rotate: rotateNext }],\n            },\n          ]}\n        >\n          <Icon source={this.state.currentIcon} size={size} color={color} />\n        </Animated.View>\n      </View>\n    );\n  }\n}\n\nexport default withTheme(CrossFadeIcon);\n\nconst styles = StyleSheet.create({\n  content: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  icon: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n"]}